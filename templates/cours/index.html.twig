{% extends 'base.html.twig' %}

{% block title %}Cours index{% endblock %}

{% block body %}
    <h1>Liste des cours</h1>

    {# Formulaire pour générer un cours avec Mistral #}
    <form method="get" action="{{ path('app_cours_generer') }}" class="mb-4">
        <div style="display: flex; gap: 10px;">
            <input type="text" name="sujet" placeholder="Entrez un sujet (ex: HTML, POO...)" required>
            <button type="submit" class="btn btn-primary">Générer un cours avec Mistral</button>
        </div>
    </form>

    {# Tableau des cours existants #}
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Titre</th>
                <th>Contenu</th>
                <th>Date de création</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for cour in cours %}
            <tr>
                <td>{{ cour.id }}</td>
                <td>{{ cour.titre }}</td>
                <td>
                    <div style="max-width: 300px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                        {{ cour.contenu }}
                    </div>
                </td>
                <td>{{ cour.createdAt ? cour.createdAt|date('Y-m-d H:i:s') : '' }}</td>
                <td>
                    <a href="{{ path('app_cours_show', {'id': cour.id}) }}" class="btn btn-sm btn-info">Voir</a>
                    <a href="{{ path('app_cours_edit', {'id': cour.id}) }}" class="btn btn-sm btn-warning">Modifier</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="5">Aucun cours trouvé.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a href="{{ path('app_cours_new') }}" class="btn btn-success mt-3">Créer manuellement un nouveau cours</a>
{% endblock %}
